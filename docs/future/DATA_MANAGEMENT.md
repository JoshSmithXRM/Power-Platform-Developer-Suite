# Data Management Enhancements

Features for querying, manipulating, and managing Dataverse data.

---

## Implemented

### Data Explorer (SQL/FetchXML Query Execution)
**Status**: ✅ Implemented (v0.2.2 - v0.2.6)
**Version**: v0.2.2 (MVP), v0.2.4 (FetchXML mode), v0.2.6 (settings)

**What's Implemented**:
- ✅ SQL query editor with syntax highlighting
- ✅ SQL → FetchXML transpilation with live preview
- ✅ FetchXML direct editing mode (bidirectional preview)
- ✅ FetchXML → SQL transpilation with warnings for unsupported features
- ✅ Query execution against Dataverse
- ✅ Results displayed in sortable data table
- ✅ Clickable record links (lookup fields and primary keys)
- ✅ Copy record URL button on hover
- ✅ Export results to CSV
- ✅ Keyboard shortcut (Ctrl+Enter)
- ✅ Query mode persistence per environment
- ✅ Row limit warning modal (TOP 100 prompt)
- ✅ Zone-based Ctrl+A selection in results table

**SQL Support** (Implemented):
- SELECT with column list or *
- FROM with table (entity) name
- WHERE with conditions (=, <>, <, >, LIKE, IN, IS NULL)
- ORDER BY
- TOP / LIMIT for pagination

**Implementation**: `src/features/dataExplorer/`

---

## High Priority

### Data Explorer - IntelliSense
**Status**: Planned
**Target Version**: v0.3.0
**Priority**: High
**Estimated Effort**: 12-18 hours
**Value**: Autocomplete for entity and attribute names while typing SQL

**Description**:
Add VS Code native IntelliSense for SQL queries - entity names after FROM, attribute names after SELECT/WHERE.

**Core Features**:
- Entity name completion (after FROM/JOIN)
- Attribute name completion (after SELECT/WHERE/ORDER BY)
- SQL keyword completion
- Metadata caching for performance

**Technical Design**: `docs/future/DATA_EXPLORER_INTELLISENSE_DESIGN.md` (V2 - revised)

**Success Criteria**:
- Typing "FROM acc" suggests "account"
- Typing "SELECT na" suggests "name" for the current entity
- Completions work in any .sql file when Data Explorer has an active environment

---

### Data Explorer - SQL Aggregates & JOINs
**Status**: Planned
**Target Version**: v0.3.0
**Priority**: High
**Estimated Effort**: 16-24 hours
**Value**: Full SQL4CDS-style query support

**Description**:
Add aggregate functions and JOIN support to SQL transpiler.

**Aggregate Support**:
- COUNT, SUM, AVG, MIN, MAX functions
- GROUP BY clause
- HAVING clause (stretch)

**JOIN Support**:
- INNER JOIN for related entities
- Lookup traversal via JOIN syntax

**Example Queries**:
```sql
SELECT statecode, COUNT(*) as count
FROM contact
GROUP BY statecode

SELECT a.name, c.fullname
FROM account a
JOIN contact c ON a.primarycontactid = c.contactid
WHERE a.revenue > 1000000
```

**Success Criteria**:
- Common aggregate queries work
- Basic JOINs translate to FetchXML link-entity
- Clear error messages for unsupported syntax

### Data Explorer - Saved Queries (UserQuery)
**Status**: Planned
**Target Version**: v0.3.0
**Priority**: High
**Estimated Effort**: 6-10 hours
**Value**: Save SQL queries as Personal Views visible in both VS Code AND Dynamics Advanced Find

**Description**:
Save the current query as a UserQuery (Personal View) in Dataverse. This bridges the VS Code experience with Dynamics - queries created in our tool appear as Advanced Find views in the browser.

**Core Features**:
- Save current query as UserQuery (Personal View)
- Load existing personal views into the editor
- Portable across devices/users with same permissions
- Available in Dynamics UI Advanced Find

**Technical Considerations**:
- UserQuery entity for saved queries (systemuser-owned)
- FetchXML storage format (already generated by transpiler)
- Need to add layoutxml for column configuration
- Query name and description input

**Success Criteria**:
- User saves SQL query, it appears in Dynamics Advanced Find
- User loads existing Personal View, can edit and re-save

---

## Medium Priority

### Record Cloning (Cross-Environment)
**Status**: Deferred
**Target Version**: v1.1+
**Priority**: Medium
**Estimated Effort**: 16-24 hours
**Value**: Copy records between environments for testing/data migration

**Description**:
Query records in source environment and clone to target environment.

**Core Features**:
- Dual environment connection (source + target)
- Query builder (reuse Data Explorer)
- Column mapping (handle different schemas)
- Preview before clone
- Batch operations with progress

**Technical Considerations**:
- Requires two authenticated connections
- Handle lookup field remapping
- Skip system fields (createdon, modifiedon, etc.)

---

### Bulk Data Operations
**Status**: Deferred
**Target Version**: v1.1+
**Priority**: Medium
**Estimated Effort**: 16-24 hours
**Value**: Safe bulk update/delete with preview

**Description**:
Bulk update or delete records with preview and confirmation.

**Core Features**:
- Query records (reuse Data Explorer)
- Bulk update: set field values across records
- Bulk delete: remove matching records
- Preview affected records before execution

**Safety Features**:
- Record count confirmation
- Preview first N records
- Dry-run mode

---

**Last Updated**: 2025-12-02
