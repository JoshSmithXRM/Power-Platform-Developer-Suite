# Retrospective: 2025-12-11

## Summary

First retrospective for PPDS, synthesizing data from 3 machines (SKYNET, Josh-PC, Josh-Surface2) covering 488 sessions over 30 days. Key findings led to improvements in extended thinking guidance, code-guardian scope, and /prepare-pr process.

## Data Analyzed

- **Period:** November 11 - December 11, 2025 (30 days)
- **Machines:** 3 (SKYNET, Josh-PC, Josh-Surface2)
- **Total Sessions:** 488
- **Total Conversation Size:** ~294 MB
- **Commits Analyzed:** 164
- **PRs in Period:** 20 (19 merged, 1 closed)
- **CI Success Rate:** 100%

## Findings

### Process Successes

1. **Stable CI Pipeline** - 100% success rate across all machines
2. **High PR Merge Rate** - 19/20 PRs merged successfully
3. **Active Worktree Usage** - Effective parallel development across 5+ worktrees
4. **Good Commit Discipline** - Conventional commits consistently used
5. **External Review Integration** - Gemini, Copilot, GitHub Advanced Security catching issues

### Process Failures

1. **Extended Thinking Underutilized on SKYNET** - <1% usage on main development machine despite higher correction rate (6%+), suggesting Claude makes more assumptions when not prompted to think
2. **Yes-Man Behavior** - 26% of sessions on Josh-Surface2 showed "You're absolutely right" patterns (baseline before Technical Discourse rule was added)
3. **Code-Guardian Gaps** - External reviewers caught issues that should have been caught locally:
   - `.mcp.json` with hardcoded tenant ID (security)
   - `withFilteredColumns` unused method (dead code)
   - Silent failure in raw DTO extraction
4. **Post-Merge Bug Fixes** - 26% fix commits indicates bugs found after merge

### Patterns Identified

#### Extended Thinking Usage Variance
| Machine | Sessions | Extended Thinking | Correction Rate |
|---------|----------|-------------------|-----------------|
| SKYNET | 344 | <1% | 6%+ |
| Josh-PC | 113 | 17% | 5% |
| Josh-Surface2 | 31 | 32% | 3% |

**Insight:** SKYNET is used for building/execution, Surface/PC for design. The low thinking usage on SKYNET correlates with higher correction rate - Claude makes more assumptions without being prompted to think.

#### High Churn Files
| File | Changes | Observation |
|------|---------|-------------|
| package.json | 26 | Expected (version bumps) |
| CHANGELOG.md | 23 | Expected (releases) |
| WebResourcesPanelComposed.ts | 19 | Active feature work |
| VirtualTableRenderer.js | 18 | Active feature work |
| Various *PanelComposed.ts | 12-15 | Pattern across panels |

### Code-Guardian Performance

**External Review Findings That Should Have Been Caught:**

| PR | Source | Finding | Severity |
|----|--------|---------|----------|
| #43 | Gemini | `.mcp.json` with hardcoded tenant ID | Critical |
| #43 | Copilot | Same `.mcp.json` security concern | Medium |
| #43 | Copilot | `withFilteredColumns` appears unused | Medium |
| #43 | Copilot | Silent failure in raw DTO extraction | Medium |
| #42 | Gemini | Virtual scroll handler inconsistency | Medium |

## Decisions Made

### Approved Actions

| # | Category | Action | Status |
|---|----------|--------|--------|
| 1 | CLAUDE.md | Add extended thinking decision matrix | Implemented |
| 2 | code-guardian | Add sensitive file check (.mcp.json, .env) | Implemented |
| 3 | code-guardian | Add ts-prune dead code check | Implemented |
| 4 | code-guardian | Add test coverage quality check | Implemented |
| 5 | /prepare-pr | Add E2E smoke test step | Implemented |

### Parked for Later

1. **Feature-level E2E Tests** - Waiting for demo solution to be built
2. **Demo Environment Integration** - In progress, will enable automated workflow testing

### Not Implemented (Already Done)

- **Technical Discourse Rule** - Already added to CLAUDE.md before this retrospective; yes-man data is baseline measurement

## Metrics

| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| CI Success Rate | 100% | 100% | Met |
| PR Merge Rate | 95% | 90% | Met |
| Extended Thinking (Design) | 17-32% | 20%+ | Partial |
| Extended Thinking (Build) | <1% | 5-10% | Needs work |
| Fix Commit Ratio | 26% | <15% | High |
| Code-Guardian Catch Rate | ~70% | 90% | Gap identified |

## Cross-Machine Comparison

| Machine | Primary Use | Sessions | Think Usage | Corrections |
|---------|-------------|----------|-------------|-------------|
| SKYNET | Building/Development | 344 | <1% | 6%+ |
| Josh-PC | Mixed | 113 | 17% | 5% |
| Josh-Surface2 | Design/Architecture | 31 | 32% | 3% |

**Key Insight:** Machine usage correlates with task type. Design-heavy work naturally uses more extended thinking.

## Next Retrospective

- **Scheduled:** On-demand or bi-weekly
- **Follow-up items:**
  - Track if extended thinking decision matrix improves usage on SKYNET
  - Verify code-guardian catches sensitive files and dead code
  - Measure if fix commit ratio decreases
  - Check E2E smoke test adoption in /prepare-pr
  - Track demo solution progress for feature-level E2E tests
