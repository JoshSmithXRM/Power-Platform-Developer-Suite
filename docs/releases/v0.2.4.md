# Release v0.2.4 - Data Explorer Enhancements

**Release Date:** 2025-11-30
**Version:** 0.2.4
**Type:** Patch Release

---

## Overview

This release focuses on Data Explorer improvements, adding bidirectional SQL/FetchXML editing, CSV export functionality, and several bug fixes for a smoother querying experience.

---

## Changes

### Added

- **Data Explorer - FetchXML Direct Editing:** SQL/FetchXML mode toggle for bidirectional query editing
  - Mode toggle tabs (SQL / FetchXML) above editor
  - **SQL Mode:** SQL editor (editable) + FetchXML preview (read-only) - existing behavior
  - **FetchXML Mode:** FetchXML editor (editable) + SQL preview (read-only)
  - Live FetchXML â†’ SQL transpilation with syntax highlighting
  - Warnings banner for unsupported FetchXML features (aggregates, distinct, paging, groupby)
  - Direct FetchXML execution without SQL transpilation step
  - Ctrl+Enter keyboard shortcut works in both modes
  - Query mode persisted per environment (SQL, FetchXML, and mode state all saved)

- **Data Explorer - Export CSV:** Export query results to CSV file
  - "Export CSV" button in toolbar after query execution
  - Generates filename with entity name and timestamp (e.g., `contact_export_2025-11-27T12-30-00.csv`)
  - RFC 4180 compliant CSV formatting (proper escaping of quotes, commas, newlines)

- **Shared CsvExportService:** Reusable CSV/JSON export utility for all features
  - Generic `toCsv(TabularData)` method for any tabular data
  - `escapeCsvField()` helper for RFC 4180 compliant CSV escaping
  - `saveToFile()` using VS Code save dialog

- **Data Explorer E2E Tests:** Playwright integration tests for Data Explorer panel
  - Query execution tests
  - Results display verification
  - Mode switching tests

### Changed

- **Plugin Trace Viewer:** Refactored `FileSystemPluginTraceExporter` to use shared `CsvExportService`
  - Reduced code duplication
  - Consistent CSV formatting across features

### Fixed

- **Data Explorer:** Column headers now display formatted display names instead of raw logical names
  - `accountid` displays as "Account ID", `createdon` as "Created On"
  - Title-case formatting with proper word breaks on capital letters

- **Data Explorer:** OData annotation fields (`@Microsoft.Dynamics.CRM.*`) no longer appear in query results
  - Annotation fields filtered at repository layer before mapping to ViewModels

- **Data Explorer:** FetchXML editor now renders immediately when switching modes
  - Both SQL and FetchXML panels rendered on load, visibility toggled via CSS
  - Eliminates blank editor state during mode switch

- **Data Explorer:** Export CSV button no longer gets stuck in loading state after export completes
  - Root cause: `await vscode.window.showInformationMessage()` blocking finally block
  - Success message now shown fire-and-forget without await

- **Data Explorer:** Lookup fields with JSON object values now display correctly
  - Falls back to ID when lookup value is a JSON object instead of GUID string
  - Prevents "[object Object]" display in lookup columns

---

## Upgrade Notes

No breaking changes. Simply update to enjoy the improvements.
