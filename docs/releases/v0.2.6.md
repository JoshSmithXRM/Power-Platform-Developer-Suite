# Release v0.2.6 - Critical Bug Fixes & User Settings

**Release Date:** 2025-12-02
**Version:** 0.2.6
**Type:** Patch Release

---

## Overview

This patch release fixes several critical bugs reported by users and adds 8 new user-configurable settings for fine-tuning extension behavior. The most impactful fix addresses the "port 3000 conflict" that caused Plugin Traces to spin forever after login.

---

## Added

### 8 User-Configurable Settings

Fine-tune extension behavior via VS Code settings (`File > Preferences > Settings` or `Ctrl+,`):

**Virtual Table Performance:**
- `powerPlatformDevSuite.virtualTable.initialPageSize` - Records loaded on first page (10-500, default: 100)
- `powerPlatformDevSuite.virtualTable.maxCachedRecords` - Max records in memory (100-100000, default: 10000)
- `powerPlatformDevSuite.virtualTable.backgroundPageSize` - Records per background fetch (100-2000, default: 500)

**Cache Control:**
- `powerPlatformDevSuite.webResources.cacheTTL` - Web resource cache duration in seconds (10-600, default: 60)
- `powerPlatformDevSuite.metadata.cacheDuration` - Entity metadata cache in seconds (60-3600, default: 300)

**API & Plugin Traces:**
- `powerPlatformDevSuite.api.maxRetries` - Retry attempts for transient failures (0-10, default: 3)
- `powerPlatformDevSuite.pluginTrace.batchDeleteSize` - Records deleted per batch (50-1000, default: 100)
- `powerPlatformDevSuite.pluginTrace.defaultDeleteOldDays` - Default for "delete old traces" (1-365, default: 30)

---

## Fixed

### Port 3000 Conflict (Critical)
**Symptom:** Plugin Traces panel spins forever with "EADDRINUSE: address already in use :::3000" error after successful login.

**Cause:** When multiple panels (Solutions List, Plugin Traces) loaded simultaneously after login, both tried to start an HTTP server on port 3000 for interactive authentication.

**Fix:** Concurrent authentication requests are now serialized. The first request starts the auth flow, subsequent requests wait for the same result.

### Environment Tab Switching
**Symptom:** Opening a new tab in DEV environment kept reopening the UAT tab instead.

**Cause:** When clicking a tool from the sidebar, no environment was specified, and the panel fell back to the first environment instead of the user's default.

**Fix:**
- Clicking a tool in sidebar now uses the default (starred) environment
- "Pick Environment" always creates a new panel for the selected environment

### SQL Query Box Disabled
**Symptom:** SQL query editor remained disabled after canceling the TOP 100 prompt.

**Cause:** Backend returned early on cancel without notifying the frontend to re-enable the editor.

**Fix:** Backend now sends `queryAborted` message when user cancels, which triggers the editor to re-enable.

### Filter Panel Sizing
**Symptom:** Plugin Traces filter menu occasionally shrunk to minimum height after opening/closing.

**Cause:** Panel height was read after toggling the CSS collapsed class, capturing the wrong (collapsed) height.

**Fix:** Height is now captured before toggling the collapsed state.

---

## Upgrade Notes

No breaking changes. Simply update to enjoy the bug fixes and new settings.

**To customize settings:**
1. Open VS Code Settings (`Ctrl+,`)
2. Search for "Power Platform"
3. Adjust values as needed

---

## Technical Notes

- All settings use `IConfigurationService` dependency injection
- Settings have sensible defaults matching previous hardcoded values
- Configuration is validated via package.json min/max constraints
- 7 additional "advanced" settings documented in `docs/future/INFRASTRUCTURE.md` for future implementation if users request them
